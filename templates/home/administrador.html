{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-4">
  <!-- Tarjetas de resumen -->
  <div class="row gy-3 gx-3 mb-4">
    <div class="col-12 col-sm-6 col-lg-4">
      <div class="bg-success text-white text-center p-3 rounded shadow-sm h-100">
        <h6 class="fw-semibold mb-1">Total Ventas del Día</h6>
        <h3 class="fw-bold mb-0">S/ {{ total_ventas }}</h3>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-4">
      <div class="bg-primary text-white text-center p-3 rounded shadow-sm h-100">
        <h6 class="fw-semibold mb-1">Total Anulaciones</h6>
        <h3 class="fw-bold mb-0">S/ {{ total_anulaciones }}</h3>
      </div>
    </div>

    <div class="col-12 col-sm-6 col-lg-4">
      <a href="{% url 'producto_app:productos_por_vencer' %}" class="text-decoration-none">
        <div class="bg-danger text-white text-center p-3 rounded shadow-sm h-100">
          <h6 class="fw-semibold mb-1">Productos por vencer</h6>
          <h3 class="fw-bold mb-0">{{ por_vencer }}</h3>
        </div>
      </a>
    </div>
  </div>

  <!-- Informe semanal -->
  <div class="mb-4">
    <h5 class="fw-semibold mb-3 text-center text-md-start">Informe de Últimos 7 Días de Ventas</h5>
    <div class="table-responsive shadow-sm rounded">
      <table class="table table-striped align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th scope="col">Fecha</th>
            <th scope="col">N° Ventas</th>
            <th scope="col">Total Vendido</th>
            <th scope="col">Total Ganancias</th>
          </tr>
        </thead>
        <tbody>
          {% for venta in resumen_semana %}
          <tr>
            <td>{{ venta.sale__date_sale__date }}</td>
            <td>{{ venta.num_ventas }}</td>
            <td>S/ {{ venta.total_vendido }}</td>
            <td>S/ {{ venta.total_ganancias }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" class="text-center text-muted py-3">No hay datos disponibles</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Ajustes de tipografía y espaciado para pantallas pequeñas -->
<style>
  @media (max-width: 576px) {
    h3 { font-size: 1.5rem; }
    h5, h6 { font-size: 1rem; }
    .table th, .table td {
      font-size: 0.9rem;
      white-space: nowrap;
    }
  }
</style>
{% endblock content %}